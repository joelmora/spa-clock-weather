<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <script type="text/javascript" src="easeljs-0.8.2.min.js"></script>
    <script type="text/javascript" src="tweenjs-0.6.2.min.js"></script>
    <script type="text/javascript" src="moment.min.js"></script>

    <script id="editable">

        function timeToDegree(time, isHour)
        {
            var isHour = typeof isHour != 'undefined' && isHour == true;
            var factor = isHour ? 15 : 6;

            return time * factor - 90;
        }

        function init() {
            var stage = new createjs.Stage("canvasClock");
            var canvasWidth = 500;
            var canvasHeight = 500;
            var canvasWidthH = canvasWidth / 2;
            var canvasHeightH = canvasHeight / 2;
            var sec = 1000;
            var min = sec * 60;
            var hour = min * 60;
            var now = moment();

            console.debug(now.hours())


            var clockBorder = new createjs.Shape();
            clockBorder.graphics.beginStroke("#FF0000").drawCircle(canvasWidthH, canvasHeightH, canvasWidthH);

            var hourHand = new createjs.Shape();
            hourHand.graphics.beginFill("#000").drawRoundRect(canvasWidthH, canvasHeightH, canvasWidthH * 0.5, 10, 3);
            hourHand.rotation = 270;
            hourHand.regX = hourHand.regY = hourHand.x = hourHand.y = canvasWidthH;
            hourHand.regY = canvasWidthH + 5;
            hourHand.rotation = timeToDegree(now.hours(), true);
            
            var minuteHand = new createjs.Shape();
            minuteHand.graphics.beginFill("#555").drawRoundRect(canvasWidthH, canvasHeightH, canvasWidthH * 0.7, 10, 3);
            minuteHand.regX = minuteHand.regY = minuteHand.x = minuteHand.y = canvasWidthH;
            minuteHand.regY = canvasWidthH + 5;
            minuteHand.rotation = timeToDegree(now.minutes());

//            var secondHand = new createjs.Bitmap('http://paulrhayes.com/experiments/clock/images/minuteHand.png');
            var secondHand = new createjs.Shape();
            secondHand.graphics.beginFill("#999").drawRoundRect(canvasWidthH, canvasHeightH, canvasWidthH * 0.9, 10, 3);
            secondHand.regX = secondHand.x = secondHand.y = canvasWidthH;
            secondHand.regY = canvasWidthH + 5;
            minuteHand.rotation = timeToDegree(now.seconds());

            stage.addChild(clockBorder);
            stage.addChild(hourHand, minuteHand, secondHand);

            createjs.Tween.get(hourHand, {loop: true})
                    .to({rotation: 360}, 12 * hour)
            ;
            createjs.Tween.get(minuteHand, {loop: true})
                    .to({rotation: 360}, 60 * min)
            ;
            createjs.Tween.get(secondHand, {loop: true})
                    .to({rotation: 360}, 60 * sec)
            ;


            createjs.Ticker.setFPS(24);
            // in order for the stage to continue to redraw when the Ticker is paused we need to add it with
            // the second ("pauseable") param set to false.
            createjs.Ticker.addEventListener("tick", stage);
        }
    </script>
</head>
<body onload="init();">
<canvas id="canvasClock" width="500" height="500" style="border: 1px solid gray"></canvas>
</body>
</html>